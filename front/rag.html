<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>S-WORKS · AI Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/css/rag.css" rel="stylesheet" />
</head>
<body>
  <div class="app">
    <!-- ========== Sidebar ========== -->
    <aside class="sidebar">
      <div class="side-top">
        <button id="btn-new-chat" class="btn side primary">+ 새 대화</button>
      </div>

      <div class="side-section">
        <div class="side-title">최근 질문</div>
        <div id="history" class="history-list"></div>
        <button id="btn-clear-history" class="btn side ghost">기록 비우기</button>
      </div>

      <div class="side-section">
        <div class="side-title">검색 설정</div>
        <div class="kv">
          <label for="days">기간(일)</label>
          <input id="days" type="number" min="7" max="3650" value="365" />
        </div>
        <div class="kv">
          <label for="prefilterLimit">프리필터</label>
          <input id="prefilterLimit" type="number" min="30" max="5000" value="300" />
        </div>
        <div class="kv">
          <label for="topK">Top-K</label>
          <input id="topK" type="number" min="5" max="50" value="20" />
        </div>

        <!-- ★ 설비타입 미리 선택 UI -->
        <div class="kv">
          <label for="equipmentType">설비타입</label>
          <select id="equipmentType">
            <option value="">(전체)</option>
            <option>SUPRA N</option>
            <option>SUPRA XP</option>
            <option>INTEGER</option>
            <option>PRECIA</option>
            <option>ECOLITE</option>
            <option>GENEVA</option>
            <option>HDW</option>
          </select>
        </div>

        <div class="side-note small muted">
          ※ “김동한”, “PT”, “SUPRA XP” 같은 키워드는 자동 인식되며,<br/>설비타입을 선택하면 해당 설비 이력만 종합해 답변합니다.
        </div>
      </div>

      <div class="side-bottom">
        <div class="badge">S-WORKS · AI</div>
        <div class="small muted">© S-WORKS</div>
      </div>
    </aside>

    <!-- ========== Main (Chat area) ========== -->
    <main class="main">
      <header class="topbar">
        <div class="brand">
          <span class="mark" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M12 2.6l3.2 1.8 3.8.7-.7 3.8 1.8 3.2-1.8 3.2.7 3.8-3.8.7L12 21.4l-3.2-1.8-3.8-.7.7-3.8L3 12l1.8-3.2-.7-3.8 3.8-.7L12 2.6z" stroke="currentColor" stroke-opacity=".25"/>
              <circle cx="12" cy="12" r="4.5" stroke="currentColor" stroke-width="1.4"/>
            </svg>
          </span>
          <span>S WORKS AI Chat</span>
        </div>
        <div class="chips">
          <span class="chip model" id="chip-model">모델: -</span>
          <span class="chip" id="chip-days">기간 365일</span>
          <span class="chip" id="chip-pref">프리필터 300</span>
          <span class="chip" id="chip-topk">Top-K 20</span>
          <span class="chip" id="chip-eq">설비: 전체</span>
        </div>
      </header>

      <section id="chat" class="chat"></section>

      <footer class="composer">
        <div class="composer-box">
          <textarea id="question" rows="1" placeholder="메시지를 입력하세요… 예) 김동한 SUPRA XP 최근 작업 요약 (Shift+Enter 줄바꿈, Enter 전송)"></textarea>
          <div class="composer-actions">
            <div id="status" class="status typing"></div>
            <div class="gap"></div>
            <button id="btn-clear" class="btn subtle">초기화</button>
            <button id="btn-ask" class="btn primary">보내기</button>
          </div>
        </div>
        <div class="tips muted small">선택한 설비타입과 질문 속 키워드를 바탕으로 관련 로그만 요약합니다.</div>
      </footer>
    </main>
  </div>

  <script src="/js/rag.js"></script>
</body>
</html>
