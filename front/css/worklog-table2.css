/* =============================================================================
   S-WORKS — readworklog.css (wide+scroll • v3.3 for PCI pages)
   - 화면 폭 확장(1680px) + 표 가로/세로 스크롤 보장
   - 파란계열 아웃라인 버튼 / 메뉴 / 검색 박스 / Others 패널 정돈
   - 표 팔레트/스티키 헤더/첫열 스티키(옵션) + 스크롤 힌트 + 접근성
   ========================================================================== */

/* ---------- Design Tokens --------------------------------------------------- */
:root{
  /* Base */
  --bg:#ffffff;
  --surface:#f4f7fb;

  --panel:#ffffff;
  --panel-2:#f9fbff;       /* 밝은 카드 배경 */
  --panel-3:#f6f8fc;       /* 옅은 구분 배경 */

  --text:#0f172a;
  --muted:#475569;
  --dim:#64748b;

  /* Accent (Blue scale) */
  --accent:#2563eb;
  --accent-600:#1d4ed8;
  --accent-700:#1e40af;
  --accent-800:#1e3a8a;
  --accent-weak: rgba(37,99,235,.14);
  --accent-soft: color-mix(in srgb, var(--accent) 8%, #fff 92%);

  /* Semantic */
  --ok:#16a34a;
  --warn:#d97706;
  --danger:#b91c1c;

  /* Borders & shadows */
  --border:#e2e8f0;
  --hair:#eef2f7;
  --inset:#eef2f7;

  --shadow-xxs:0 1px 0 rgba(2,6,23,.04);
  --shadow-xs: 0 1px 1px rgba(2,6,23,.06);
  --shadow-sm: 0 1px 2px rgba(2,6,23,.08);
  --shadow:    0 8px 24px rgba(2,6,23,.10);
  --shadow-lg: 0 16px 40px rgba(2,6,23,.14);

  --ring-outer:0 0 0 4px rgba(37,99,235,.16);
  --ring-inner:0 0 0 1px rgba(37,99,235,.55);

  --radius:16px; --radius-md:12px; --radius-sm:10px; --radius-xs:8px;
  --gutter:20px;

  --control-h:40px;
  --font-control:14.5px;

  /* 화면 더 넓게 씀 */
  --frame-max: 1680px;

  /* 표 영역 높이(세로 스크롤) */
  --table-max-h: 78vh;

  /* Table palette */
  --table-border:#e6edf5;
  --thead-bg:#0b3b7a;
  --thead-text:#f8fafc;
  --row-alt:#f8fbff;
  --row-hover:#eef5ff;
  --firstcol-bg:#fbfdff;
}

/* ---------- Base / Reset ---------------------------------------------------- */
*,
*::before,
*::after{ box-sizing:border-box; }
html,body{ height:100%; }
html{ scroll-behavior:smooth; }
body{
  margin:0;
  background: linear-gradient(180deg, #fff 0 64px, var(--surface) 64px 100%);
  color:var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', Arial, sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  -webkit-tap-highlight-color: rgba(37,99,235,.06);
}
img,svg{ display:block; max-width:100%; }
a{ color:var(--accent); text-decoration:none; text-underline-offset:2px; }
a:hover{ text-decoration:underline; }
.hidden{ display:none !important; }
.inner{ max-width: var(--frame-max); margin:0 auto; padding:0 18px; }
::selection{ background:var(--accent-weak); color:#0b1220; }
:where(a,button,input,select,textarea):focus-visible{
  outline:0; box-shadow: var(--ring-inner), var(--ring-outer);
  border-color: rgba(37,99,235,.55) !important;
}

/* ---------- Typography ------------------------------------------------------ */
h2{
  margin: 14px 0 12px;
  text-align:center;
  color:#0b1220;
  font-size: clamp(18px, 1.6vw, 22px);
  font-weight: 900;
  letter-spacing:-.01em;
}
h2 + .button-container{ margin-top: 2px; }

/* ---------- Top Navigation -------------------------------------------------- */
nav{
  position:sticky; top:0; z-index:8000;
  background:#fff; color:var(--text);
  border-bottom:1px solid var(--border); box-shadow:var(--shadow);
}
.nav-container{
  display:flex; align-items:center; justify-content:space-between; gap:10px; min-height:56px;
}
.nav-title a{ font-weight:800; font-size:18px; color:inherit; padding:6px 8px; border-radius:10px; }
.nav-title a:hover{ color:var(--accent); background:var(--accent-soft); }
.sign-container{ display:flex; gap:8px; }

.sign-link,.menu-item,.menu-btn{
  display:inline-flex; align-items:center; gap:8px; height:34px; padding:0 12px; border-radius:10px;
  border:1px solid var(--border); background:#fff; color:var(--text); font-size:13px; cursor:pointer;
  transition:background .2s,border-color .2s,color .2s,transform .06s, box-shadow .2s;
  box-shadow: var(--shadow-xs);
}
.sign-link:hover,.menu-item:hover,.menu-btn:hover{
  background:#f1f5f9; border-color:var(--accent); color:var(--accent); box-shadow:var(--shadow-sm);
}

.menu-icon{ width:22px; height:14px; position:relative; color:inherit; }
.menu-icon span{
  position:absolute; left:0; right:0; height:2px; border-radius:2px; background:currentColor;
  transform-origin:center; transition:transform .2s,opacity .2s,top .2s;
}
.menu-icon span:nth-child(1){ top:0 } .menu-icon span:nth-child(2){ top:6px } .menu-icon span:nth-child(3){ top:12px }

.menu-bar{
  background:#fff; border-top:1px solid var(--border);
  overflow:hidden; max-height:0; transition:max-height .28s ease; will-change:max-height;
  box-shadow: 0 6px 18px rgba(2,6,23,.06) inset;
}
.menu-bar.open{ max-height:640px; }
.menu-bar-content{ max-width: var(--frame-max); margin:0 auto; padding:8px 12px; display:flex; flex-wrap:wrap; gap:8px; }

/* ---------- Layout ---------------------------------------------------------- */
main{ padding: 26px 0 40px; }
#combined-data > .inner{
  background: var(--panel);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 14px 16px 18px;
  position:relative;
}

/* ---------- Others (설비) 플로팅 패널 ------------------------------------- */
#main-button{
  position: fixed;
  right: 16px; top: 50%;
  transform: translateY(-50%);
  height: 44px; padding: 0 16px;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius: 12px;
  border:1px solid var(--accent);
  background:#fff; color: var(--accent);
  font-weight: 800; font-size: 13px; letter-spacing:.2px; cursor:pointer;
  box-shadow: var(--shadow-sm);
  transition: transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s, filter .16s;
}
#main-button:hover{ background: var(--accent-soft); box-shadow: var(--shadow); }
#main-button:active{ transform: translateY(calc(-50% + 1px)); }

#equipment-buttons{
  display:flex; flex-direction:column; gap:10px;
  position: fixed; right: 16px; top: 50%; transform: translateY(-50%);
  max-height: 0; opacity: 0; overflow: hidden;
  transition: max-height .4s ease, opacity .25s ease;
  width: 240px; pointer-events: none;
}
#equipment-buttons.open{
  max-height: 560px; opacity: 1; pointer-events: auto;
}
.equipment-btn{
  height: 40px; padding: 0 12px; border-radius: 12px; font-size: 13px; font-weight: 800; letter-spacing:.2px;
  border:1px solid var(--accent); background:#fff; color:var(--accent); cursor:pointer;
  box-shadow: var(--shadow-xs);
  transition: transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s, filter .16s;
}
.equipment-btn:hover{ background: var(--accent-soft); box-shadow: var(--shadow-sm); }
.equipment-btn:active{ transform: translateY(1px); }

/* ---------- Search & Toggle Buttons ---------------------------------------- */
.search-container{
  display:flex; align-items:center; justify-content:center; flex-wrap:wrap;
  gap:8px; margin: 8px auto 16px; padding: 10px 12px;
  border:1px solid var(--border); border-radius: 12px; background: var(--panel-2);
}

.search-container input{
  height: var(--control-h);
  min-width: 240px;
  border-radius: 10px; border:1px solid var(--border); background:#fff; color:var(--text);
  padding: 0 12px; font-size: var(--font-control);
  box-shadow: var(--shadow-xxs), inset 0 1px 0 rgba(2,6,23,.04);
  transition: border-color .16s ease, box-shadow .16s ease, background .16s ease;
}
.search-container input:hover{ border-color:#d6deea; }
.search-container input::placeholder{ color:#9aa8bd; }

/* 공통 버튼(아웃라인) */
.search-container button{
  height: var(--control-h);
  padding: 0 14px; border-radius: 12px; font-weight: 800; font-size: 13px; letter-spacing:.2px; cursor:pointer;
  border:1px solid var(--accent); background:#fff; color: var(--accent);
  box-shadow: var(--shadow-xs);
  transition: transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s, filter .16s;
}
.search-container button:hover{ background: var(--accent-soft); box-shadow: var(--shadow-sm); }
.search-container button:active{ transform: translateY(1px); }

/* RESET만 중립톤(회색 아웃라인) */
#reset-button{
  border-color:#cbd5e1; color:#334155;
}
#reset-button:hover{
  background: #f3f6fb;
  color: var(--text);
}

/* TOTAL/COUNT/SELF 토글버튼 - 활성 시 가독성(배경 채움 + 흰 글씨) */
#show-total-button.active-button,
#show-count-button.active-button,
#show-self-button.active-button{
  background: var(--accent);
  color: #fff;
  border-color: var(--accent-600);
  box-shadow: 0 1px 0 rgba(255,255,255,.3) inset, var(--shadow-sm);
}

/* SEARCH 전용(돋보기 느낌의 부드러운 강조) */
#search-button{ border-color: var(--accent-600); }

/* ---------- Total Average --------------------------------------------------- */
#total-average-container{
  text-align:center; font-weight:900; letter-spacing:.2px;
  margin: 14px 0 12px; color: var(--accent-700);
  background: #f3f7ff;
  border: 1px solid #e1e9fb;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}

/* =============================================================================
   TABLES — 가로/세로 스크롤 보장 + 스티키 헤더/첫열 + 팔레트
   ========================================================================== */
.table-container{
  position:relative; margin-top: 14px; background:#fff; border:1px solid var(--table-border);
  border-radius: 12px;
  overflow: auto;                           /* ← 가로/세로 스크롤 */
  overscroll-behavior: contain;             /* 스크롤 버블링 제어 */
  max-height: var(--table-max-h);           /* ← 세로 스크롤 조건 */
  box-shadow: var(--shadow);
  -webkit-overflow-scrolling: touch;        /* iOS 부드러운 스크롤 */
}

/* 스크롤 힌트(좌/우) */
.table-container::before,
.table-container::after{
  content:""; position:absolute; top:0; width: 26px; height:100%; pointer-events:none; opacity:0;
  transition: opacity .16s ease;
}
.table-container::before{
  left:0; background: linear-gradient(90deg, #fff, rgba(255,255,255,0));
}
.table-container::after{
  right:0; background: linear-gradient(270deg, #fff, rgba(255,255,255,0));
}
.table-container:hover::before,
.table-container:hover::after{ opacity: .9; }

/* 표 크기 전략: 내용에 맞춰 가로로 늘어나게 */
.table{
  display:none;                               /* 기본 숨김 (JS로 전환) */
  border-collapse: separate; border-spacing:0; table-layout: fixed; /* sticky 안정성 */
  width: max-content;                         /* ← 내용 폭만큼 확장 */
  min-width: 100%;                            /* 컨테이너보다 작지 않게 */
  font-size: 13px;
}
.table.active{ display: table; }              /* class 방식도 병행 지원 */
#combined-table{ display: table; }            /* 기본 표시 */

/* 셀 바닥 설정: 셀 단위 최소폭을 부여해 가로 스크롤 생성 */
.table thead th, .table tbody td{
  border:1px solid var(--table-border);
  padding: 10px 8px; text-align:center; word-wrap: break-word;
  min-width: 88px;                            /* 일반 열 최소폭 */
}
.table thead th:first-child,
.table tbody td:first-child{ min-width: 200px; text-align: left; } /* 항목명(첫 열) */

/* 헤더 */
.table thead th{
  position: sticky; top:0; z-index: 2;
  background: var(--thead-bg); color: var(--thead-text);
  border-color: color-mix(in srgb, var(--thead-bg) 65%, #ffffff 35%);
  border-bottom-width: 2px;
  letter-spacing:.1px; font-weight: 800;
}

/* 지브라 + 호버 */
.table tbody tr:nth-child(even){ background: var(--row-alt); }
.table tbody tr:hover > td{ background: var(--row-hover); }

/* 첫 열 스티키(옵션) — 필요시 .no-sticky-first 로 끄기 */
.table-container:not(.no-sticky-first) .table thead th:first-child,
.table-container:not(.no-sticky-first) .table tbody td:first-child{
  position: sticky; left: 0; z-index: 3; background: var(--firstcol-bg);
  box-shadow: 1px 0 0 0 var(--table-border);
}
.table-container:not(.no-sticky-first) .table thead th:first-child{ z-index: 4; }

/* 둥근 모서리 */
.table thead th:first-child{ border-top-left-radius: 12px; }
.table thead th:last-child{ border-top-right-radius: 12px; }
.table tbody tr:last-child td:first-child{ border-bottom-left-radius: 12px; }
.table tbody tr:last-child td:last-child{ border-bottom-right-radius: 12px; }

/* 중분류(rowspan) 칩 스타일 */
td[rowspan]{
  background:#f3f6fb; color:#0b3b7a; font-weight: 900;
  border-left: 4px solid #cfe0fb; border-right-color: #e8eef8;
}

/* 0% / 100% 텍스트 강조 */
td.red{ color: var(--danger); font-weight: 800; }
td.blue{ color: var(--accent-600); font-weight: 800; }

/* AVERAGE 행(인라인 스타일 형태도 커버) */
td[style*="background-color: #e0e0e0"]{
  background: var(--accent-700) !important; color:#fff !important;
  font-weight: 900 !important; letter-spacing:.2px;
}

/* 포커스 가시성(키보드) */
tbody tr:focus-within td{
  outline: 2px solid rgba(37,99,235,.35);
  outline-offset: -2px;
  background: color-mix(in srgb, var(--row-hover) 60%, #ffffff 40%);
}

/* 밀도 옵션: 필요 시 table에 .dense / .comfy 추가 */
.table.dense th, .table.dense td{ padding: 8px !important; font-size: 12px !important; }
.table.comfy th, .table.comfy td{ padding: 14px !important; font-size: 13.5px !important; }

/* 툴팁(소분류) */
.subcategory-row td{ position:relative; }
.subcategory-row td::after{
  content: attr(title);
  position:absolute; top: 50%; left: 100%; transform: translateX(10px) translateY(-50%);
  background:#0f172a; color:#f8fafc; border:1px solid rgba(255,255,255,.1);
  padding: 6px 8px; font-size: 12px; border-radius: 8px; white-space: nowrap;
  z-index: 10; opacity:0; pointer-events:none; transition: opacity .16s ease-in-out;
  box-shadow: 0 6px 18px rgba(2,6,23,.25);
}
.subcategory-row td:hover::after{ opacity:1; }

/* ---------- Scrollbar Styling (WebKit/Chromium) ---------------------------- */
.table-container::-webkit-scrollbar{
  height: 12px; width: 12px;
}
.table-container::-webkit-scrollbar-track{
  background: #f1f5f9; border-radius: 10px;
}
.table-container::-webkit-scrollbar-thumb{
  background: #c7d2fe; border-radius: 10px; border: 2px solid #f1f5f9;
}
.table-container::-webkit-scrollbar-thumb:hover{
  background: #a5b4fc;
}
/* Firefox */
.table-container{ scrollbar-width: thin; scrollbar-color: #c7d2fe #f1f5f9; }

/* ---------- Log Modal ------------------------------------------------------- */
#log-modal{
  position: fixed; inset: 0; z-index: 9000;
  background: rgba(2,6,23,.35); display:none; align-items:center; justify-content:center;
}
#log-modal:not(.hidden){ display:flex; }
@supports (backdrop-filter: blur(8px)){
  #log-modal{ backdrop-filter: blur(8px) saturate(112%); }
}
.modal-content{
  width: min(1000px, 92vw); max-height: 76vh; overflow:auto; padding: 16px;
  background:#fff; border:1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow-lg);
}
.close-button{
  float:right; width: 34px; height: 34px; border-radius: 10px; border:1px solid var(--border);
  background:#fff; color:#64748b; cursor:pointer; font-size: 18px;
  display:inline-flex; align-items:center; justify-content:center;
  transition: background .16s, color .16s, border-color .16s, transform .06s;
}
.close-button:hover{ background:#f1f5f9; color:#0f172a; border-color:#cbd5e1; }

#log-list{ list-style:none; padding:0; margin:12px 0 6px; }
.log-item{ border-bottom:1px solid var(--hair); padding: 10px 2px; }
.log-summary{ margin-bottom:6px; font-size:13.5px; color:#0f172a; }
.log-desc{
  margin-top:8px; background:#f9f9fb; padding:10px; border-radius: 10px; line-height:1.55; color:#334155;
  border:1px solid #eef1f7;
}
.toggle-desc-btn{
  margin-left:10px; height: 28px; padding:0 10px; border-radius: 10px; border:1px solid #cbd5e1;
  background:#fff; color:#334155; font-size:12.5px; cursor:pointer;
  transition: background .16s, color .16s, border-color .16s, transform .06s, box-shadow .16s;
}
.toggle-desc-btn:hover{ background:#f3f6fb; color:#0f172a; border-color:#b7c5d8; box-shadow: var(--shadow-xs); }
.toggle-desc-btn:active{ transform: translateY(1px); }

/* ---------- Footer ---------------------------------------------------------- */
footer{ color:#64748b; padding:24px 0 34px; background:transparent; }
footer .inner{ padding:0 16px; }
footer p{ margin:6px 2px 0; font-size:12.5px; text-align:center; }

/* ---------- Utilities ------------------------------------------------------- */
.sr-only{
  position:absolute !important; width:1px !important; height:1px !important;
  padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0,0,0,0) !important;
  white-space:nowrap !important; border:0 !important;
}

/* ---------- States / Validation / Motion / A11y ---------------------------- */
:where(input,select,textarea)[aria-invalid="true"]{
  border-color:#fca5a5 !important; box-shadow: 0 0 0 1px #fecaca inset;
}
input:active, select:active, textarea:active{ transform: translateY(0.5px); }

/* iOS 폰트 자동확대 방지 */
@supports (-webkit-touch-callout: none){
  input, select, textarea{ font-size: 16px; }
}

/* 대비↑ */
@media (prefers-contrast: more){
  :where(a,button,input,select,textarea):focus-visible{
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 65%, white);
  }
  .table-container, .modal-content{ border-color: color-mix(in srgb, var(--border) 60%, #000); }
}

/* 모션↓ */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
}

/* ---------- Responsive ------------------------------------------------------ */
@media (max-width: 1440px){
  :root{ --frame-max: 1440px; }
}
@media (max-width: 1240px){
  :root{ --frame-max: 1200px; --table-max-h: 70vh; }
}
@media (max-width: 980px){
  :root{ --frame-max: 940px; --table-max-h: 64vh; }
  #equipment-buttons{ right: 12px; width: 220px; }
  #main-button{ right: 12px; }
  .table thead th:first-child,
  .table tbody td:first-child{ min-width: 160px; } /* 모바일은 첫 열 조금 줄임 */
}
@media (max-width: 760px){
  :root{ --frame-max: 720px; --table-max-h: 56vh; }
  .search-container{ justify-content: stretch; }
  .search-container > *{ flex: 1 1 auto; min-width: 120px; }
  .search-container input{ min-width: 160px; }
  #main-button{ top: auto; bottom: 16px; transform:none; }
  #equipment-buttons{ top: auto; bottom: 70px; transform:none; }
}

/* ---------- Print ----------------------------------------------------------- */
@media print{
  nav, .menu-bar, #main-button, #equipment-buttons, #log-modal{ display:none !important; }
  body{ background:#fff; color:#000; }
  #combined-data > .inner{ box-shadow:none; border-color:#d1d5db; background:#fff; }
  .table thead th{
    background: var(--thead-bg) !important; color:#fff !important; -webkit-print-color-adjust:exact; print-color-adjust:exact;
  }
  td[rowspan]{ background:#f3f6fb !important; color:#0b3b7a !important; }
  td[style*="background-color: #e0e0e0"]{ background: var(--accent-700) !important; color:#fff !important; }
}

/* ---------- Legacy Compatibility (기존 클래스 보정) ------------------------- */
.active-button{
  background: var(--accent) !important;
  color: #fff !important;
  border-color: var(--accent-600) !important;
  box-shadow: 0 1px 0 rgba(255,255,255,.3) inset, var(--shadow-sm) !important;
}

/* 기타 페이지 호환 */
.button-container button{
  height: 40px;
  padding: 0 14px; margin-right: 10px;
  font-size: 13px; font-weight: 800; letter-spacing:.2px;
  border:1px solid var(--accent); border-radius: 12px; background:#fff; color:var(--accent);
  cursor:pointer; box-shadow: var(--shadow-xs);
  transition: transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s;
}
.button-container button:hover{ background: var(--accent-soft); box-shadow: var(--shadow-sm); }
.button-container .active-button{ background: var(--accent); color:#fff; }

/* 필요 시 첫열 스티키 끄기: .table-container에 .no-sticky-first 부여 */
.table-container.no-sticky-first .table thead th:first-child,
.table-container.no-sticky-first .table tbody td:first-child{
  position: static; box-shadow: none; background: inherit;
}

/* 끝 */
