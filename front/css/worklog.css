/* =============================================================================
   S-WORKS — worklog.css (clean-frame • v3)
   - 폼 구분감↑(필드카드) + 단계별 라인
   - PASTE 모달: 에디터형 UI(가이드/카운터/툴바)
   - 프리뷰 모달: 2열 키-밸류 + 스티키 헤더/푸터 + 지브라 + hover 하이라이트
   - Select2/동적필드/버튼/접근성/프린트 튜닝
   ========================================================================== */

/* ---------- Tokens ---------------------------------------------------------- */
:root{
  --bg:#ffffff;
  --surface:#f4f7fb;

  --panel:#ffffff;
  --panel-2:#f9fbff;         /* 폼 내부 카드 옅은 바탕 */
  --panel-3:#f6f8fc;         /* 구분용 더 옅은 톤 */

  --text:#0f172a;
  --muted:#475569;
  --dim:#64748b;

  --accent:#2563eb;
  --accent-weak: rgba(37,99,235,.14);
  --accent-soft: color-mix(in srgb, var(--accent) 7%, #fff 93%);

  --border:#e2e8f0;
  --hair:#eef2f7;
  --inset:#eef2f7;

  --shadow-xs: 0 1px 1px rgba(2,6,23,.06);
  --shadow-sm: 0 1px 2px rgba(2,6,23,.08);
  --shadow:    0 8px 24px rgba(2,6,23,.10);
  --shadow-lg: 0 16px 40px rgba(2,6,23,.14);

  --ring-outer:0 0 0 4px rgba(37,99,235,.14);
  --ring-inner:0 0 0 1px rgba(37,99,235,.55);

  --radius:16px; --radius-md:12px; --radius-sm:10px; --radius-xs:8px;
  --gutter:20px;

  --control-h:44px;
  --font-control:16px;

  --form-max: 980px;
  --modal-w: 1000px;
  --modal-w-sm: 720px;

  /* 필드 카드 그리드(PC) 가이드 폭 */
  --label-w: 220px;

  /* 프리뷰 전용 */
  --kv-label-w: 160px;
}

/* ---------- Base / Reset ---------------------------------------------------- */
*,
*::before,
*::after{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: linear-gradient(180deg, #fff 0 72px, var(--surface) 72px 100%);
  color:var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', Arial, sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  -webkit-tap-highlight-color: rgba(37,99,235,.06);
}
img,svg{ display:block; max-width:100%; }
a{ color:var(--accent); text-decoration:none; text-underline-offset:2px; }
a:hover{ text-decoration:underline; }
.hidden{ display:none !important; }
.inner{ max-width:1280px; margin:0 auto; padding:0 16px; }
::selection{ background:var(--accent-weak); color:#0b1220; }
:where(a,button,input,select,textarea):focus-visible{
  outline:0; box-shadow: var(--ring-inner), var(--ring-outer);
  border-color: rgba(37,99,235,.55) !important;
}

/* ---------- Nav (공통) ------------------------------------------------------ */
nav{
  position:sticky; top:0; z-index:8000;
  background:#fff; color:var(--text);
  border-bottom:1px solid var(--border); box-shadow:var(--shadow);
}
.nav-container{
  display:flex; align-items:center; justify-content:space-between; gap:10px; min-height:56px;
}
.nav-title a{ font-weight:800; font-size:18px; color:inherit; padding:4px 6px; border-radius:8px; }
.nav-title a:hover{ color:var(--accent); }
.sign-container{ display:flex; gap:8px; }

.sign-link,.menu-item,.menu-btn{
  display:inline-flex; align-items:center; gap:8px; height:34px; padding:0 12px; border-radius:10px;
  border:1px solid var(--border); background:#fff; color:var(--text); font-size:13px; cursor:pointer;
  transition:background .2s,border-color .2s,color .2s,transform .06s, box-shadow .2s;
  box-shadow: var(--shadow-xs);
}
.sign-link:hover,.menu-item:hover,.menu-btn:hover{
  background:#f1f5f9; border-color:var(--accent); color:var(--accent); box-shadow:var(--shadow-sm);
}
.menu-icon{ width:22px; height:14px; position:relative; color:inherit; }
.menu-icon span{
  position:absolute; left:0; right:0; height:2px; border-radius:2px; background:currentColor;
  transform-origin:center; transition:transform .2s,opacity .2s,top .2s;
}
.menu-icon span:nth-child(1){ top:0 } .menu-icon span:nth-child(2){ top:6px } .menu-icon span:nth-child(3){ top:12px }

.menu-bar{
  background:#fff; border-top:1px solid var(--border);
  overflow:hidden; max-height:0; transition:max-height .28s ease; will-change:max-height;
  box-shadow: 0 6px 18px rgba(2,6,23,.06) inset;
}
.menu-bar.open{ max-height:640px; }
.menu-bar-content{ max-width:1280px; margin:0 auto; padding:8px 12px; display:flex; flex-wrap:wrap; gap:8px; }

/* ---------- Page Frame ------------------------------------------------------ */
main{ padding:28px 0 44px; }
#worklog-form > .inner{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 16px 16px 22px;
  max-width: var(--form-max); margin: 0 auto;
  position:relative;
}

/* ---------- Paste Quick Button (상단 고정) ---------------------------------- */
.btn-paste{
  position:sticky; top:12px; z-index:10;
  margin-left:auto; display:inline-flex; align-items:center; justify-content:center;
  height:36px; padding:0 14px; border-radius:999px; font-weight:800; letter-spacing:.2px; font-size:12.5px;
  background: var(--accent-soft);
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  color:#0b1220; box-shadow: var(--shadow-xs);
  transition:transform .06s, filter .16s, box-shadow .16s;
}
.btn-paste:hover{ filter:brightness(1.02); box-shadow:var(--shadow-sm); }
.btn-paste:active{ transform:translateY(1px); }

/* =============================================================================
   FORM — 단계 구분 + 필드카드 + 인터랙션
   ========================================================================== */
.form{ margin-top:6px; counter-reset: step; }

/* 섹션 헤더: 스텝 배지 + 얇은 라인 */
.form-step{
  display:none; animation: step-in .16s ease-out; padding-top:2px; position:relative;
}
.form-step.active{ display:block; }
@keyframes step-in{ from{ opacity:0; transform:translateY(6px) } to{ opacity:1; transform:none } }
.fade-in{ animation: step-in .16s ease-out; }
.fade-out{ animation: step-out .12s ease-in; }
@keyframes step-out{ from{ opacity:1; transform:none } to{ opacity:0; transform:translateY(6px) } }

.form-step > h3{
  margin:0; font-size:18px; font-weight:900; letter-spacing:-.01em; color: color-mix(in srgb, var(--text) 94%, black);
  padding: 6px 2px 14px; position:relative; display:flex; align-items:center; gap:10px;
}
.form-step > h3::before{
  counter-increment: step; content: counter(step);
  width:26px; height:26px; border-radius:8px; flex:0 0 26px;
  display:inline-grid; place-items:center;
  font-size:13px; font-weight:900; color:#0b1220;
  background:var(--accent-soft);
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  box-shadow: var(--shadow-xs);
}
.form-step > h3::after{
  content:""; position:absolute; left:-2px; right:-2px; bottom:0; height:1px;
  background: linear-gradient(90deg, transparent, var(--hair), transparent);
}

/* 필드카드: 각 필드가 카드처럼 보이도록 구분감 강화 */
.form-row{
  position:relative;
  display:grid; grid-template-columns: 1fr; gap:10px;
  padding:12px; margin-top:10px;
  background: var(--panel-2);
  border:1px solid var(--inset);
  border-radius: var(--radius-md);
  box-shadow: inset 0 1px 0 rgba(2,6,23,.04);
}
.form-row::before{
  /* 좌측 은은한 가이드바 */
  content:""; position:absolute; left:8px; top:8px; bottom:8px; width:2px; border-radius:2px;
  background: linear-gradient(180deg, #e7edf5, #dde6f1);
}
.form-row > label{
  font-size:12.5px; letter-spacing:.2px; color:#5d718b; font-weight:800; padding-left:6px;
}
.form-row:focus-within{
  border-color:#cfe0fb; background:#fff;
  box-shadow: 0 0 0 1px #e3edff inset, var(--shadow-sm);
}

/* 단계 설명문 */
.form-description{
  margin:12px 2px 0; color:#6b7f96; font-size:12.5px; letter-spacing:.2px;
  background: var(--panel-3); border:1px solid var(--inset); border-radius:12px; padding:10px 12px;
}

/* 인풋/셀렉트/텍스트에어리어 */
input[type="text"],
input[type="date"],
input[type="time"],
input[type="number"],
select,
textarea{
  height: var(--control-h);
  border-radius: var(--radius-sm);
  border:1px solid var(--border);
  background:#fff; color: var(--text);
  padding: 0 12px;
  transition: border-color .16s ease, box-shadow .16s ease, background .16s ease;
  box-shadow: inset 0 1px 0 rgba(2,6,23,.04);
  width:100%;
  font-size: var(--font-control);
}
textarea{ min-height:120px; padding:10px 12px; resize:vertical; line-height:1.55; font-size:14px; }
input::placeholder, textarea::placeholder{ color:#94a3b8; }
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator{ filter:opacity(.75); }
input:-webkit-autofill{
  -webkit-text-fill-color: var(--text);
  transition: background-color 9999s ease-out 0s;
  box-shadow: 0 0 0px 1000px #fff inset;
}
:where(input,select,textarea):hover{ border-color:#d6deea; }

/* 셀렉트 커스텀 화살표 */
select{
  -webkit-appearance:none; appearance:none;
  background-image:
    linear-gradient(180deg, #fff, #fff),
    url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.2 1.5l4 4 4-4' fill='none' stroke='%23667892' stroke-width='1.7' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position: right 12px center, right 12px center;
  background-size: 100% 100%, 12px 8px;
  padding-right: 34px;
}

/* 입력+버튼 한 줄 */
.input-button-row{
  display:grid; grid-template-columns: 1fr auto; gap:8px;
}

/* 버튼 */
.btn-primary, .btn-secondary{
  height:40px; border-radius:10px; padding:0 14px; font-weight:800; letter-spacing:.2px; font-size:13px;
  cursor:pointer; border:1px solid var(--border); box-shadow:var(--shadow-xs);
  transition:transform .06s, background .16s, border-color .16s, color .16s, box-shadow .16s;
}
.btn-primary{
  background:var(--accent-soft);
  border-color: color-mix(in srgb, var(--accent) 45%, var(--border));
  color:#0b1220;
}
.btn-primary:hover{ filter:brightness(1.02); box-shadow:var(--shadow-sm); }
.btn-primary:active{ transform:translateY(1px); }
.btn-secondary{ background:#fff; color:var(--text); }
.btn-secondary:hover{ background:#f1f5f9; color:var(--accent); border-color:var(--accent); box-shadow:var(--shadow-sm); }

/* STEP 버튼 영역 */
.form-buttons{
  display:flex; flex-wrap:wrap; gap:8px; padding:12px 2px 4px;
}

/* INFO 카드(설비 특이사항) */
.info-container{
  position:relative; background: var(--panel-3);
  border:1px solid var(--inset); border-radius: var(--radius-md);
  box-shadow:var(--shadow-xs); padding:10px 10px 6px;
}
#info[disabled]{ background:#f8fafc; color:#6b7f96; cursor:not-allowed; }
#edit-info{
  position:absolute; right:8px; top:8px; width:30px; height:30px; border-radius:8px; border:1px solid var(--border);
  background:#fff; color:#64748b; display:inline-flex; align-items:center; justify-content:center; cursor:pointer;
  transition: background .16s, color .16s, border-color .16s, transform .06s;
}
#edit-info:hover{ background:#f1f5f9; color:#0f172a; border-color:#cbd5e1; }
#save-info{
  width:100%; height:40px; border-radius:10px; border:1px solid var(--border);
  background:#fff; color:var(--text); font-weight:800;
  transition:transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s;
  box-shadow: var(--shadow-xs); margin-top:8px;
}
#save-info:hover{ background:#f1f5f9; color:var(--accent); border-color:var(--accent); box-shadow:var(--shadow-sm); }
#save-info:active{ transform:translateY(1px); }

/* 동적 필드 그룹 */
.form-group{ display:grid; gap:10px; padding:4px 2px; }
.form-group > label{
  font-size:12.5px; letter-spacing:.2px; color:#5d718b; font-weight:800; padding-left:6px;
}

/* 동적 필드 컨테이너(카드화) */
.task-man-container,
.task-description-container,
.task-cause-container,
.task-result-container{
  display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:start;
  background:#fff; border:1px solid var(--border); border-radius:12px; padding:10px; box-shadow: var(--shadow-xs);
}
.task-man-container{ grid-template-columns: 1fr 140px auto; }
.task-man-input,.task-description-input,.task-cause-input,.task-result-input{ min-height:92px; }
.task-man-select{
  height:40px; border-radius:10px; border:1px solid var(--border); background:#fff; color:#0f172a;
  padding:0 10px; font-size:14px;
}
.btn-add{
  justify-self:start; height:36px; padding:0 12px; border-radius:10px; border:1px dashed var(--border);
  background:#fff; color:#0f172a; font-weight:800; font-size:12.5px; letter-spacing:.2px; cursor:pointer;
  transition:transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s;
}
.btn-add:hover{ background:#f8fafc; color:var(--accent); border-color:var(--accent); box-shadow:var(--shadow-xs); }
.btn-remove{
  height:36px; padding:0 12px; border-radius:10px; border:1px solid #f1c9c9; background:#fff; color:#b42318; font-weight:900;
  cursor:pointer; transition:transform .06s, background .16s, border-color .16s, color .16s;
}
.btn-remove:hover{ background:#fff5f5; border-color:#fecaca; }
.btn-remove:disabled{ opacity:.45; cursor:not-allowed; }

/* 필드 셋과 셋 사이의 “세퍼레이터 라인” */
.form-step::after{
  content:""; display:block; height:10px; margin:14px -2px 8px;
  background:
    linear-gradient(180deg, var(--hair), transparent 40%),
    linear-gradient(0deg, var(--hair), transparent 40%);
  border-radius: 2px;
}

/* ---------- Select2 --------------------------------------------------------- */
.select2-container{ width:100% !important; }
.select2-container .select2-selection--single{
  height: var(--control-h); border:1px solid var(--border) !important; border-radius: var(--radius-sm) !important;
  display:flex; align-items:center; padding:0 34px 0 12px; box-shadow: inset 0 1px 0 rgba(2,6,23,.04);
}
.select2-selection__rendered{ line-height: var(--control-h) !important; font-size:14px; }
.select2-selection__arrow{ height:var(--control-h) !important; right:8px !important; }
.select2-dropdown{ border:1px solid var(--border) !important; box-shadow:var(--shadow) !important; }

/* ---------- Footer ---------------------------------------------------------- */
footer{ color:#64748b; padding:24px 0 34px; background:transparent; }
footer .inner{ padding:0 16px; }
footer p{ margin:6px 2px 0; font-size:12.5px; }

/* =============================================================================
   OVERLAY (공통)
   ========================================================================== */
.overlay{
  display:none; position:fixed; inset:0; z-index:9000; background: rgba(2,6,23,.35);
}
.overlay.show, .overlay.visible{ display:block; }  /* JS 양쪽 클래스 대응 */
@supports (backdrop-filter: blur(8px)){
  .overlay{ backdrop-filter: blur(8px) saturate(112%); }
}

/* =============================================================================
   MODAL — PREVIEW (#preview-modal)
   ========================================================================== */
.print-container{
  display:none; position:fixed; inset:0; z-index:9010; padding:24px; overflow:auto;
}
.print-container.show, .print-container.visible{ display:block; } /* JS 양쪽 클래스 대응 */
@keyframes modal-in{ from{ transform:translateY(6px); opacity:0 } to{ transform:none; opacity:1 } }
.print-container.show, .print-container.visible{ animation: modal-in .14s ease-out; }

/* 헤더(스티키) */
.print-container > h2{
  width:min(var(--modal-w-sm), 92vw); margin:48px auto 0;
  position: sticky; top: 18px; z-index: 2;
  background:linear-gradient(180deg, #fff, #fdfefe);
  border:1px solid var(--border); border-bottom:0; border-radius: 14px 14px 0 0;
  padding:14px 16px; font-size:18px; font-weight:900; letter-spacing:-.01em;
  box-shadow: var(--shadow);
}

/* KV 리스트(행) */
.print-container > p{
  width:min(var(--modal-w-sm), 92vw); margin:0 auto;
  display: grid; grid-template-columns: var(--kv-label-w) 1fr;
  align-items: start; gap: 12px;
  background:#fff;
  border-left:1px solid var(--border); border-right:1px solid var(--border);
  border-bottom:1px solid var(--hair);
  padding:10px 16px; font-size:14px; color:#0f172a;
  transition: background .12s ease;
}
.print-container > p:first-of-type{ border-top:1px solid var(--border); }
.print-container > p:nth-of-type(odd){ background:#fafcfe; } /* 지브라 */
.print-container > p:hover{ background:#f6faff; }            /* hover 하이라이트 */

.print-container > p strong{
  justify-self: end;
  color:#5d718b; font-weight:800; letter-spacing:.2px; font-size:12.5px;
  align-self: start; padding-top:2px;
}
.print-container > p .important{
  display:inline-block; align-self:center; justify-self:end;
  background: var(--accent-soft);
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  color:#0b1220; font-weight:900; font-size:12px;
  padding:2px 8px; border-radius:999px;
  box-shadow: var(--shadow-xs);
}
.print-container > p span{
  min-height: 22px; line-height: 1.58;
  word-break: break-word; white-space: pre-wrap;
}
.print-container > p span:empty::before{
  content:"—"; color:#94a3b8;
}

/* 푸터 버튼(스티키) */
.modal-buttons{
  width:min(var(--modal-w-sm), 92vw); margin:10px auto 16px;
  position: sticky; bottom: 12px; z-index: 3;
  display:flex; gap:8px; justify-content:flex-end;
  background:
    linear-gradient(180deg, rgba(255,255,255,0), #fff 40%),
    #fff;
  border:1px solid var(--border);
  border-radius: 12px;
  padding:10px;
  box-shadow: var(--shadow);
}

/* 모바일 1열 */
@media (max-width: 560px){
  :root{ --kv-label-w: 1fr; }
  .print-container > p{
    grid-template-columns: 1fr;
    gap:6px;
  }
  .print-container > p strong,
  .print-container > p .important{
    justify-self: start;
  }
  .modal-buttons{ justify-content: stretch; }
  .modal-buttons > *{ flex:1 1 auto; }
}

/* 키보드 포커스 대비 */
#print-modal, #preview-modal { outline: 0; }

/* =============================================================================
   MODAL — PASTE (#popup)  • 에디터형 UI
   ========================================================================== */
#popup{
  display:none; position:fixed; inset:0; z-index:9020;
  padding:24px; overflow:auto;
}
#popup.show{ display:block; }

#popup > h3{
  width:min(var(--modal-w-sm), 94vw); margin:46px auto 0;
  background:linear-gradient(180deg, #fff, #fdfefe);
  border:1px solid var(--border); border-bottom:0; border-radius: var(--radius) var(--radius) 0 0;
  padding:12px 16px; font-size:16px; font-weight:900; letter-spacing:-.01em;
  box-shadow: var(--shadow);
}

/* 에디터 래퍼 */
#popup .editor-wrap{
  width:min(var(--modal-w-sm), 94vw); margin:0 auto;
  background:#fff; border-left:1px solid var(--border); border-right:1px solid var(--border);
  box-shadow: var(--shadow-xs); position:relative;
}

/* 가이드 박스 */
#popup .guide{
  padding:12px 16px; border-bottom:1px solid var(--hair);
  background: var(--panel-3);
  font-size:13px; color:#425269; line-height:1.55;
}
#popup .guide kbd{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px; padding:2px 6px; border-radius:6px; border:1px solid #cfd8e6; background:#f7fafc;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.8);
}

/* 텍스트 영역(모노), 라인 섀도 배경 */
#popup > textarea,
#popup .editor{
  width:min(var(--modal-w-sm), 94vw); margin:0 auto;
  display:block; min-height:260px; max-height:70vh; overflow:auto;
  border:1px solid var(--border); border-top:0; border-bottom:0;
  padding:14px 16px; font-size:14px; background:#fff;
  box-shadow: var(--shadow-xs);
}
#popup > textarea{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  line-height:1.6; white-space:pre-wrap;
  background:
    linear-gradient(180deg, rgba(2,6,23,.02), rgba(2,6,23,0) 20%),
    repeating-linear-gradient(180deg, transparent 0 28px, rgba(2,6,23,.03) 28px 29px);
}

/* 하단 툴바 */
#popup .toolbar{
  width:min(var(--modal-w-sm), 94vw); margin:0 auto; display:flex; flex-wrap:wrap; gap:8px;
  padding:10px 16px; border:1px solid var(--border); border-top:0; background:#fff;
  border-radius: 0 0 var(--radius) var(--radius); box-shadow: var(--shadow);
}
#popup .toolbar .btn-primary, #popup .toolbar .btn-secondary{
  height:40px; margin:0; box-shadow: var(--shadow-xs);
}
#popup .meta{
  margin-left:auto; display:flex; align-items:center; gap:10px; color:#6b7f96; font-size:12.5px;
}
#popup .meta .dot{ width:6px; height:6px; border-radius:50%; background:#c3d0ea; }

/* 기존 버튼 위치(호환) */
#popup .btn-primary{ margin-left: calc(50% - min(var(--modal-w-sm), 94vw)/2); }
#popup .btn-secondary{ margin-left:8px; }

/* =============================================================================
   MODAL — EQUIPMENT ADD (.equipment-add-modal)
   ========================================================================== */
.equipment-add-modal{
  display:none; position:fixed; inset:0; z-index:9030; padding:24px; overflow:auto;
  background: rgba(2,6,23,.35);
}
.equipment-add-modal.show{ display:block; }
@supports (backdrop-filter: blur(8px)){ .equipment-add-modal{ backdrop-filter: blur(8px) saturate(112%); } }

.equipment-add-modal-content{
  margin:48px auto; width:min(var(--modal-w), 96vw);
  background:#fff; border:1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow-lg); padding:0; position:relative; animation: modal-in .16s ease-out;
}

.equipment-add-modal-content > p{
  margin:0; padding:10px 16px; font-size:14px; color:#0f172a;
  border-bottom:1px solid var(--hair); background:linear-gradient(180deg, #fff, #fdfefe);
}
.equipment-add-modal-close{
  position:absolute; top:8px; right:10px; width:32px; height:32px; border-radius:10px;
  border:1px solid var(--border); background:#fff; color:#64748b; cursor:pointer; font-size:18px;
  display:inline-flex; align-items:center; justify-content:center;
  transition: background .16s, color .16s, border-color .16s, transform .06s;
}
.equipment-add-modal-close:hover{ background:#f1f5f9; color:#0f172a; border-color:#cbd5e1; }

/* 내부 폼 레이아웃: PC 2열(라벨 고정폭) / 모바일 1열 */
.equipment-add-modal-content .form-row{
  display:grid; gap:8px; padding:10px 16px 0; align-items:center;
  grid-template-columns: var(--label-w) 1fr;
  border-bottom:1px solid var(--hair);
  background: var(--panel-2);
  margin:6px 10px; border-radius:12px; box-shadow: inset 0 1px 0 rgba(2,6,23,.04);
}
.equipment-add-modal-content .form-row:last-of-type{ border-bottom:0; padding-bottom:12px; }
.equipment-add-modal-content .form-row > label{
  grid-column: 1; font-size:12.5px; letter-spacing:.2px; color:#5d718b; font-weight:800; padding-left:6px;
}
.equipment-add-modal-content .form-row > :where(input,select,textarea){ grid-column: 2; }
.equipment-add-modal-content textarea{ min-height:120px; }
.equipment-add-modal .modal-buttons{
  display:flex; gap:8px; justify-content:flex-end; padding:12px 16px 16px;
}

@media (max-width: 900px){
  .equipment-add-modal-content .form-row{ grid-template-columns: 1fr; margin:8px 10px; }
  .equipment-add-modal-content .form-row > label,
  .equipment-add-modal-content .form-row > :where(input,select,textarea){ grid-column: 1; }
}

/* =============================================================================
   States / Validation / Motion / Accessibility
   ========================================================================== */
:where(input,select,textarea)[aria-invalid="true"]{
  border-color:#fca5a5 !important; box-shadow: 0 0 0 1px #fecaca inset;
}
input:active, select:active, textarea:active{ transform: translateY(0.5px); }

/* iOS 폰트 자동확대 방지 */
@supports (-webkit-touch-callout: none){
  input, select, textarea{ font-size: 16px; }
}

/* 대비↑ */
@media (prefers-contrast: more){
  :where(a,button,input,select,textarea):focus-visible{
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 65%, white);
  }
  .form-row{ border-color: color-mix(in srgb, var(--border) 60%, #000); }
  .equipment-add-modal-content, .print-container > h2, #popup > h3{ border-color: color-mix(in srgb, var(--border) 55%, #000); }
}

/* 모션↓ */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
}

/* 프린트 */
@media print{
  nav, .menu-bar, .btn-paste, .overlay, .print-container, #popup, .equipment-add-modal{ display:none !important; }
  body{ background:#fff; color:#000; }
  #worklog-form > .inner{ box-shadow:none; border-color:#d1d5db; background:#fff; }
}

/* =============================================================================
   추가 폴리시 (작은 손봐주기)
   ========================================================================== */
/* 폼 최하단 여백 */
#worklog-form > .inner::after{
  content:""; display:block; height:8px; margin-top:8px;
}

/* 작은 힌트 텍스트 */
.hint{ color:#7890a8; font-size:12px; }

/* 필드카드 안에서 키보드 탭 진행 시 배경 하이라이트 */
.form-row:focus-within::after{
  content:""; position:absolute; inset:0; pointer-events:none; border-radius: inherit;
  box-shadow: inset 0 0 0 1px rgba(37,99,235,.12), inset 0 1px 0 rgba(255,255,255,.8);
}

/* 두꺼운 구분이 필요한 경우(.section-split 부여 시) */
.section-split{
  height:14px; margin:18px -2px 6px;
  background: linear-gradient(180deg, rgba(2,6,23,.04), rgba(2,6,23,0));
  border-top:1px solid var(--hair);
}

/* Select2 드롭다운 항목간 구분 */
.select2-results__option{ padding:8px 10px !important; }
.select2-container--default .select2-results__option--highlighted[aria-selected]{
  background-color: #e7efff !important; color:#0b1220 !important;
}

/* Step 4 (날짜/시간) 입력칸 간격 조금 더 */
.form-step[data-step="4"] .form-row{ margin-top:12px; }

/* 버튼 아이콘 간격 예비 (아이콘 쓰면) */
button i{ margin-right:6px; }

/* ===== Error UX (inline + step flag + toast) ===== */
.field-error-msg{
  margin-top:6px; padding:8px 10px; border:1px solid #fecaca; background:#fff5f5;
  color:#9f1239; border-radius:10px; font-size:12.5px; line-height:1.45;
}
.form-row.error{ border-color:#fca5a5; background:#fff; }
.form-row.error::before{ background: linear-gradient(180deg, #fecaca, #fecaca); }

/* 스텝 헤더에 에러 플래그 */
.form-step.has-error > h3::before{
  background:#fff5f5;
  border-color:#fca5a5;
  color:#9f1239;
}

/* 상단 토스트 */
.toast{
  position:fixed; right:14px; top:14px; z-index:10000;
  min-width:260px; max-width:420px;
  background:#0b1220; color:#fff;
  border:1px solid rgba(255,255,255,.14);
  box-shadow: var(--shadow-lg); border-radius:14px; overflow:hidden;
  animation: toast-in .14s ease-out;
}
.toast .toast-head{
  display:flex; align-items:center; gap:8px;
  padding:10px 12px; font-weight:800; border-bottom:1px solid rgba(255,255,255,.08);
}
.toast .toast-body{ padding:10px 12px; font-size:13px; line-height:1.5; }
.toast.error{ background:#7f1d1d; }
.toast.warn{ background:#92400e; }
.toast.ok{ background:#065f46; }
@keyframes toast-in{ from{ opacity:0; transform:translateY(-6px)} to{opacity:1; transform:none} }

/* 작은 배지 */
.badge{
  display:inline-flex; align-items:center; gap:6px;
  height:22px; padding:0 8px; border-radius:999px; font-size:12px; font-weight:800;
  background:rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.22);
}

/* 선택값이 "SELECT"일 때 시각 강조 (JS가 aria-invalid=true도 셋팅) */
select.option-select[aria-invalid="true"]{
  background-image:
    linear-gradient(180deg, #fff, #fff),
    url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.2 1.5l4 4 4-4' fill='none' stroke='%23b42318' stroke-width='1.7' stroke-linecap='round'/%3E%3C/svg%3E");
  border-color:#fca5a5 !important; box-shadow: 0 0 0 1px #fecaca inset;
}

.ems-wrap{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
.ems-seg{ display:inline-flex; border:1px solid #d0d7de; border-radius:8px; overflow:hidden; }
.ems-seg input{ display:none; }
.ems-seg label{ padding:6px 10px; cursor:pointer; user-select:none; }
.ems-seg input:checked + label{ background:#0ea5e9; color:white; }
.ems-tools{ display:inline-flex; align-items:center; gap:8px; }
.btn-chip{ padding:4px 10px; border:1px solid #d0d7de; background:white; border-radius:999px; cursor:pointer; }
.btn-chip.active{ background:#0ea5e9; color:#fff; border-color:#0ea5e9; }
.btn-text{ background:none; border:none; color:#0ea5e9; cursor:pointer; padding:0 4px; }
.ems-hint{ font-size:12.5px; color:#475569; padding:2px 6px; border:1px dashed #cbd5e1; border-radius:6px; }
