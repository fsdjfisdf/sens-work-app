/* =============================================================================
   S-WORKS — supra_maintenance.css (clean-frame • checklist • 1-column • v2)
   - PC 포함 항상 1열
   - 카테고리 카드 + 스티키 헤더
   - 커스텀 체크박스(큰 히트영역/선명한 포커스/체크 시 라인 하이라이트)
   - 툴팁/호버/액티브/접근성/프린트/고대비/저모션까지 세부 튜닝
   - 네비/메뉴바 스타일은 worklog 테마와 동일 톤
   ========================================================================== */

/* ---------- Tokens ---------------------------------------------------------- */
:root{
  --bg:#ffffff;
  --surface:#f4f7fb;

  --panel:#ffffff;
  --panel-2:#f9fbff;         /* 폼 내부 카드 옅은 바탕 */
  --panel-3:#f6f8fc;         /* 구분용 더 옅은 톤 */

  --text:#0f172a;
  --muted:#475569;
  --dim:#64748b;

  --accent:#2563eb;
  --accent-weak: rgba(37,99,235,.14);
  --accent-soft: color-mix(in srgb, var(--accent) 7%, #fff 93%);

  --border:#e2e8f0;
  --hair:#eef2f7;
  --inset:#eef2f7;

  --shadow-xs: 0 1px 1px rgba(2,6,23,.06);
  --shadow-sm: 0 1px 2px rgba(2,6,23,.08);
  --shadow:    0 8px 24px rgba(2,6,23,.10);
  --shadow-lg: 0 16px 40px rgba(2,6,23,.14);

  --ring-outer:0 0 0 4px rgba(37,99,235,.14);
  --ring-inner:0 0 0 1px rgba(37,99,235,.55);

  --radius:16px; --radius-md:12px; --radius-sm:10px; --radius-xs:8px;

  --form-max: 860px;      /* 1열 가독 폭 */
  --label-w: 220px;       /* (예비) 라벨 고정폭 사용 시 */
}

/* ---------- Base / Reset ---------------------------------------------------- */
*,
*::before,
*::after{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: linear-gradient(180deg, #fff 0 72px, var(--surface) 72px 100%);
  color:var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', Arial, sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
img,svg{ display:block; max-width:100%; }
a{ color:var(--accent); text-decoration:none; text-underline-offset:2px; }
a:hover{ text-decoration:underline; }
.hidden{ display:none !important; }
.inner{ max-width:1280px; margin:0 auto; padding:0 16px; }
::selection{ background:var(--accent-weak); color:#0b1220; }
:where(a,button,input,select,textarea):focus-visible{
  outline:0; box-shadow: var(--ring-inner), var(--ring-outer);
  border-color: rgba(37,99,235,.55) !important;
}

/* ---------- Nav (worklog 테마와 동일) -------------------------------------- */
nav{
  position:sticky; top:0; z-index:8000;
  background:#fff; color:var(--text);
  border-bottom:1px solid var(--border); box-shadow: var(--shadow);
}
.nav-container{
  display:flex; align-items:center; justify-content:space-between; gap:10px; min-height:56px;
}
.nav-title a{ font-weight:800; font-size:18px; color:inherit; padding:4px 6px; border-radius:8px; }
.nav-title a:hover{ color:var(--accent); }
.sign-container{ display:flex; gap:8px; }

.sign-link,.menu-item,.menu-btn{
  display:inline-flex; align-items:center; gap:8px; height:34px; padding:0 12px; border-radius:10px;
  border:1px solid var(--border); background:#fff; color:var(--text); font-size:13px; cursor:pointer;
  transition:background .2s,border-color .2s,color .2s,transform .06s, box-shadow .2s;
  box-shadow: var(--shadow-xs);
}
.sign-link:hover,.menu-item:hover,.menu-btn:hover{
  background:#f1f5f9; border-color:var(--accent); color:var(--accent); box-shadow:var(--shadow-sm);
}
.menu-icon{ width:22px; height:14px; position:relative; color:inherit; }
.menu-icon span{
  position:absolute; left:0; right:0; height:2px; border-radius:2px; background:currentColor;
  transform-origin:center; transition:transform .2s,opacity .2s,top .2s;
}
.menu-icon span:nth-child(1){ top:0 } .menu-icon span:nth-child(2){ top:6px } .menu-icon span:nth-child(3){ top:12px }

.menu-bar{
  background:#fff; border-top:1px solid var(--border);
  overflow:hidden; max-height:0; transition:max-height .28s ease; will-change:max-height;
  box-shadow: 0 6px 18px rgba(2,6,23,.06) inset;
}
.menu-bar.open{ max-height:640px; }
.menu-bar-content{ max-width:1280px; margin:0 auto; padding:8px 12px; display:flex; flex-wrap:wrap; gap:8px; }

/* ---------- Layout ---------------------------------------------------------- */
main{ padding:28px 0 44px; }
#checklist-form > .inner{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 18px 16px 22px;
  max-width: var(--form-max);
  margin: 0 auto;
  position:relative;
}

/* 폼 */
#checklistForm{
  display:grid; gap:16px;
}

/* 제목/스크롤 마진 (상단 네비 가림 방지) */
#checklist-form h1, #checklist-form h2{ margin:0; letter-spacing:-.01em; scroll-margin-top:72px; }

/* ---------- 1-Column container -------------------------------------------- */
#checklist-container{
  display:grid; gap:14px;
  grid-template-columns: 1fr; /* ✅ PC 포함 항상 1열 고정 */
}

/* 카테고리 카드 */
.category{
  background: var(--panel-2);
  border:1px solid var(--inset);
  border-radius: var(--radius-md);
  box-shadow: inset 0 1px 0 rgba(2,6,23,.04), var(--shadow-xs);
  padding:0;
  overflow:hidden;
  position:relative;
}
.category::before{
  /* 좌측 은은한 가이드바 */
  content:""; position:absolute; left:8px; top:14px; bottom:14px; width:2px; border-radius:2px;
  background: linear-gradient(180deg, #e7edf5, #dde6f1);
}

/* 스티키 카테고리 헤더 */
.category > h2{
  position: sticky; top: 10px; z-index: 1;
  margin:0; padding:10px 14px 10px 18px;
  background: linear-gradient(180deg, #fff, #fdfefe);
  border-bottom:1px dashed var(--hair);
  box-shadow: 0 4px 12px rgba(2,6,23,.04);
  font-size:16px; font-weight:900; color: color-mix(in srgb, var(--text) 94%, black);
}
.category > h2::before{
  content:""; width:10px; height:10px; border-radius:3px; display:inline-block; margin-right:8px;
  background: var(--accent-soft);
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  box-shadow: var(--shadow-xs);
}

/* ---------- Items (label + checkbox) --------------------------------------- */
.item{
  display:grid; grid-template-columns: 1fr auto; align-items:center;
  gap:10px; padding:12px 14px 12px 18px;
  background:#fff; border-bottom:1px solid var(--hair);
  transition: background .16s, border-color .16s, box-shadow .16s, transform .06s;
}
.item:last-child{ border-bottom:0; }
.item:hover{
  background:#fbfdff; border-color:#eaf1ff;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.65);
}
.item:active{ transform: translateY(.5px); }

.item > label{
  font-size:14.5px; color:#0f172a; letter-spacing:.1px; line-height:1.45;
  cursor: default; user-select:text; /* 라벨만으로 토글은 아님(현재 마크업 유지) */
}

/* 체크박스 커스텀: 더 큰 히트영역 */
.item input[type="checkbox"]{
  -webkit-appearance:none; appearance:none;
  width:22px; height:22px; border-radius:7px;
  border:1.5px solid var(--border); background:#fff; cursor:pointer;
  display:inline-grid; place-items:center;
  transition: border-color .16s, background .16s, box-shadow .16s, transform .06s;
}
.item input[type="checkbox"]:hover{ border-color:#c7d2e5; }
.item input[type="checkbox"]:active{ transform: translateY(.5px); }
.item input[type="checkbox"]:focus-visible{
  box-shadow: var(--ring-inner), var(--ring-outer);
  border-color: rgba(37,99,235,.55);
}
.item input[type="checkbox"]::after{
  content:""; width:13px; height:13px; border-radius:3px;
  transform: scale(0); transition: transform .12s ease-in-out;
  background: var(--accent);
  mask: url("data:image/svg+xml,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='white' d='M7.629 14.571L3 9.942l1.414-1.414 3.215 3.215L15.557 3.815l1.414 1.414z'/%3E%3C/svg%3E") center/contain no-repeat;
}
.item input[type="checkbox"]:checked{
  border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
  background: var(--accent-soft);
}
.item input[type="checkbox"]:checked::after{ transform: scale(1); }

/* 체크 상태일 때 줄 전체 하이라이트 (지원 브라우저) */
.item:has(input[type="checkbox"]:checked){
  background: #f7fbff;
  border-color:#cfe0fb;
}

/* 키보드 포커스가 item 내부로 들어오면 라인 하이라이트 */
.item:focus-within{
  outline:0;
  box-shadow: inset 0 0 0 1px rgba(37,99,235,.12), inset 0 1px 0 rgba(255,255,255,.8);
}

/* 짝/홀 줄 미세 지브라 */
.category .item:nth-child(2n){ background:#fcfeff; }

/* ---------- Tooltip using [title] (개선) ----------------------------------- */
.item[title]{ position:relative; }
.item[title]:hover::after{
  content: attr(title);
  position:absolute; left:18px; right:56px; bottom: 100%;
  margin-bottom:8px; padding:8px 10px; font-size:12.5px; color:#0b1220;
  background:#fff; border:1px solid var(--border); border-radius:10px;
  box-shadow: var(--shadow);
  white-space:normal; line-height:1.45; z-index:2;
}
.item[title]:hover::before{
  content:""; position:absolute; left:28px; bottom: calc(100% - 2px);
  width:10px; height:10px; background:#fff; border-left:1px solid var(--border); border-top:1px solid var(--border);
  transform: rotate(45deg);
}

/* ---------- Approver / Submit ---------------------------------------------- */
#approver-select{
  -webkit-appearance:none; appearance:none;
  height:42px; border-radius:10px; border:1px solid var(--border);
  background:
    linear-gradient(180deg,#fff,#fff),
    url("data:image/svg+xml,%3Csvg width='12' height='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.2 1.5l4 4 4-4' fill='none' stroke='%23667892' stroke-width='1.7' stroke-linecap='round'/%3E%3C/svg%3E")
    no-repeat right 12px center/12px 8px;
  padding:0 34px 0 12px; font-size:14px; color:var(--text);
  box-shadow: inset 0 1px 0 rgba(2,6,23,.04);
  max-width: 260px;
}
#approver-select:hover{ border-color:#d6deea; }

#requestApproval{
  height:42px; border-radius:10px; padding:0 16px; font-weight:800; letter-spacing:.2px; font-size:13px;
  cursor:pointer; border:1px solid var(--border); box-shadow:var(--shadow-xs);
  background: var(--accent-soft); color:#0b1220;
  transition:transform .06s, background .16s, border-color .16s, color .16s, box-shadow .16s;
}
#requestApproval:hover{ filter:brightness(1.02); box-shadow:var(--shadow-sm); }
#requestApproval:active{ transform:translateY(1px); }




/* ---------- Footer ---------------------------------------------------------- */
footer{ color:#64748b; padding:24px 0 34px; background:transparent; }
footer .inner{ padding:0 16px; }
footer p{ margin:6px 2px 0; font-size:12.5px; }

/* ---------- Accessibility / States ----------------------------------------- */
:where(select,button,input)[aria-invalid="true"]{
  border-color:#fca5a5 !important; box-shadow: 0 0 0 1px #fecaca inset;
}
@supports (-webkit-touch-callout: none){
  select,button,input{ font-size:16px; } /* iOS 자동확대 방지 */
}

/* 고대비 모드 */
@media (prefers-contrast: more){
  :where(a,button,input,select,textarea):focus-visible{
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 65%, white);
  }
  .category, #checklist-form > .inner{ border-color: color-mix(in srgb, var(--border) 60%, #000); }
  .category > h2{ border-color: color-mix(in srgb, var(--border) 55%, #000); }
}

/* 저모션 모드 */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
}

/* ---------- Print ----------------------------------------------------------- */
@media print{
  nav, .menu-bar, #approver-select, #requestApproval{ display:none !important; }
  body{ background:#fff; color:#000; }
  #checklist-form > .inner{ box-shadow:none; border:1px solid #d1d5db; }
  .category{ break-inside: avoid; page-break-inside: avoid; }
}

/* ---------- Small polish ---------------------------------------------------- */
/* 섹션 하단 여백 */
#checklist-form > .inner::after{
  content:""; display:block; height:8px; margin-top:8px;
}

/* 미세한 탭 진행 하이라이트 */
.category:focus-within{
  box-shadow: 0 0 0 1px rgba(37,99,235,.06) inset;
}

/* 체크 All 같은 버튼을 나중에 추가해도 어울리도록 예비 스타일 */
.btn-secondary{
  height:36px; padding:0 12px; border-radius:10px; border:1px solid var(--border);
  background:#fff; color:var(--text); font-weight:800; font-size:12.5px; letter-spacing:.2px; cursor:pointer;
  transition:transform .06s, background .16s, color .16s, border-color .16s, box-shadow .16s;
  box-shadow: var(--shadow-xs);
}
.btn-secondary:hover{ background:#f1f5f9; color:var(--accent); border-color:var(--accent); box-shadow:var(--shadow-sm); }

/* 툴팁이 겹치지 않도록 상위 컨테이너 stacking 문맥 확보 */
#checklist-container{ position:relative; z-index:0; }

/* --- Approver / Submit (bottom, non-sticky, centered) --- */
#approver-select,
#requestApproval{
  position: static;          /* 고정 해제 */
}

#checklistForm > #approver-select,
#checklistForm > #requestApproval{
  justify-self: center;      /* 폼의 맨 아래 ‘가운데’ 정렬 */
}

#approver-select{
  margin-top: 18px;
  max-width: 320px;          /* 보기 좋은 폭 */
}

#requestApproval{
  margin-top: 10px;          /* 셀렉트와 간격 */
  width: 320px;              /* 셀렉트와 폭 맞춤 */
  border-radius: 12px;
}

/* 모바일에서는 풀폭 */
@media (max-width: 560px){
  #approver-select,
  #requestApproval{
    width: 100%;
    max-width: none;
  }
}

/* SAVE 버튼 — 폼 맨 아래, 비고정, 테마 톤 */
#checklistForm > button[type="submit"]{
  display:block;
  margin: 18px auto 6px;       /* 가운데 배치 */
  min-width: 220px;
  height: 44px;
  padding: 0 18px;

  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  background: var(--accent-soft);
  color: #0b1220;

  font-weight: 800;
  letter-spacing: .2px;
  cursor: pointer;

  box-shadow: var(--shadow-xs);
  transition: transform .06s, filter .16s, box-shadow .16s, border-color .16s;
}
#checklistForm > button[type="submit"]:hover{
  filter: brightness(1.02);
  box-shadow: var(--shadow-sm);
}
#checklistForm > button[type="submit"]:active{
  transform: translateY(1px);
}
#checklistForm > button[type="submit"]:disabled{
  opacity: .5;
  cursor: not-allowed;
  filter: grayscale(20%);
}
/* 접근성 포커스 링 */
#checklistForm > button[type="submit"]:focus-visible{
  outline: 0;
  box-shadow: var(--ring-inner), var(--ring-outer);
  border-color: rgba(37,99,235,.55);
}
/* 모바일에선 풀폭 */
@media (max-width: 560px){
  #checklistForm > button[type="submit"]{
    width: 100%;
    min-width: 0;
  }
}
